---
description: 
alwaysApply: true
enabled: true
updatedAt: 2026-01-21T07:01:34.082Z
provider: 
---

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å•å…ƒæµ‹è¯•å¼€å‘åŠ©æ‰‹ï¼Œæ‰€æœ‰ä»£ç å¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹ç¼–ç è§„èŒƒã€‚

æœ¬è§„åˆ™æ–‡ä»¶ç”¨äºæŒ‡å¯¼ AI åœ¨ tccp é¡¹ç›®ä¸­ç”Ÿæˆé«˜è´¨é‡çš„å•å…ƒæµ‹è¯•ã€‚

## å˜é‡å®šä¹‰
- JAVAHOME: é€šè¿‡ which java å‘½ä»¤è·å– JAVA_HOME ç¯å¢ƒå˜é‡

## é¡¹ç›®è¦æ±‚

### æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç­–ç•¥
- **è´¨é‡ä¼˜å…ˆ**: ä¼˜å…ˆä¿è¯ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹èƒ½å¤Ÿæ­£ç¡®è¿è¡Œ
- **å®Œæ•´è¦†ç›–**: ç”Ÿæˆå…¨é¢çš„æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬æ­£å¸¸æµç¨‹ã€è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸å¤„ç†
- **åœºæ™¯ä¸°å¯Œ**: æ ¹æ®å‡½æ•°ç‰¹æ€§ç”Ÿæˆå¤šç§æµ‹è¯•åœºæ™¯
- **ä»£ç æ­£ç¡®æ€§**: 1.æ­£ç¡®importä¾èµ–å¯¹è±¡,ç¦æ­¢ç¼–é€ ä¸å­˜åœ¨çš„ç±»å‹ï¼›2.**è°ƒç”¨è¢«æµ‹ä»£ç æ—¶å¿…é¡»éµå¾ªå…¶å®é™…çš„æ–¹æ³•ç­¾å,ç¦æ­¢ç¼–é€ ä¸å­˜åœ¨æ–¹æ³•**

### æŠ€æœ¯æ ˆ
- Java ç‰ˆæœ¬: 1.8
- é¡¹ç›®æ¡†æ¶ï¼šSpring Boot 2.7+
- æµ‹è¯•æ¡†æ¶ï¼šTestNG 7.5
- Mockå·¥å…·ï¼šMockito 4.11.0
- å·¥å…·æ’ä»¶ï¼šLombok 1.18.24

## æµ‹è¯•æ–‡ä»¶ç»„ç»‡è§„èŒƒ

### æ–‡ä»¶å‘½åä¸è·¯å¾„
- æµ‹è¯•æ–‡ä»¶ä»¥ `Test.java` ç»“å°¾ï¼Œå¦‚ï¼š`DealApiImpl.java` â†’ `DealApiImplTest.java`
- æµ‹è¯•æ–‡ä»¶æ”¾åœ¨å¯¹åº”å­æ¨¡å—çš„src/testç›®å½•ä¸‹ï¼Œç›®å½•å±‚çº§ä¸è¢«æµ‹ç±»ä¿æŒä¸€è‡´

### æµ‹è¯•æ³¨é‡Šè§„èŒƒ
æ¯ä¸ªæµ‹è¯•æ–¹æ³•å¿…é¡»åŒ…å«æ³¨é‡Šä¿¡æ¯ï¼š

```java
// æµ‹è¯•åœºæ™¯ï¼šæ›´æ–°ä¸å­˜åœ¨çš„ç­–ç•¥æ—¶åº”è¿”å›æœªæ‰¾åˆ°é”™è¯¯
// å‰ç½®æ¡ä»¶ï¼šæ•°æ®åº“ä¸­ä¸å­˜åœ¨ç›®æ ‡ç­–ç•¥ID
// è¾“å…¥æ•°æ®ï¼šä¸å­˜åœ¨çš„ç­–ç•¥IDå’Œæ›´æ–°å†…å®¹
// é¢„æœŸç»“æœï¼šè¿”å›ç­–ç•¥æœªæ‰¾åˆ°çš„é”™è¯¯ä¿¡æ¯
@Test
public void testUpdateNonExistentStrategy() {
    // æµ‹è¯•å®ç°...
}
```

### æµ‹è¯•ç»“æ„
> ğŸ“ **ç¤ºä¾‹è¯´æ˜**: ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„ç±»å‹å’Œæ–¹æ³•åä»…ä½œä¸ºç¤ºä¾‹æ¼”ç¤ºï¼Œéœ€è¦æ ¹æ®é¡¹ç›®å®é™…çš„ç±»å‹å‘½åè¿›è¡Œæ›¿æ¢ã€‚

#### å•ä¸ªæµ‹è¯•æ¨¡å¼ï¼ˆæ¨èï¼‰
æ¯ä¸ªæµ‹è¯•å‡½æ•°ä¸“æ³¨äºä¸€ä¸ªå…·ä½“çš„æµ‹è¯•åœºæ™¯ï¼Œä¼˜åŠ¿ï¼š
- ğŸ¯ **æ˜“äºç†è§£**: æµ‹è¯•é€»è¾‘æ¸…æ™°ï¼Œåœºæ™¯æ˜ç¡®
- ğŸ” **æ˜“äºè°ƒè¯•**: æµ‹è¯•å¤±è´¥æ—¶èƒ½å¿«é€Ÿå®šä½é—®é¢˜
- ğŸ“ **æ˜“äºç»´æŠ¤**: ä¿®æ”¹æŸä¸ªåœºæ™¯ä¸å½±å“å…¶ä»–æµ‹è¯•

#### å®Œæ•´æµ‹è¯•ç±»ç¤ºä¾‹

```java
@Slf4j
public class DealApiImplTest {

    @InjectMocks
    private DealApiImpl dealApi;

    @Mock
    private PurchaseDealBroker purchaseDealBroker;
    @Mock
    private PaymentService paymentService;

    @BeforeMethod
    public void setUp() {
        MockitoAnnotations.openMocks(this);
    }

    // æµ‹è¯•åœºæ™¯ï¼šæ­£å¸¸è´­ä¹°æµç¨‹
    // å‰ç½®æ¡ä»¶ï¼šæ‰€æœ‰ä¾èµ–æœåŠ¡æ­£å¸¸è¿”å›
    // è¾“å…¥æ•°æ®ï¼šåŒ…å«æœ‰æ•ˆå•†å“çš„è´­ä¹°è¯·æ±‚
    // é¢„æœŸç»“æœï¼šè¿”å›æˆåŠŸçš„è´­ä¹°å“åº”
    @Test
    public void testPurchaseDeal_Success() {
        // 1. å‡†å¤‡æµ‹è¯•æ•°æ®
        PurchaseOrderItemBo orderItem = PurchaseOrderItemBo.builder()
                .spuId("spu456")
                .quantity(2)
                .unitPrice(new BigDecimal("99.99"))
                .build();

        PurchaseDealRequest request = PurchaseDealRequest.builder()
                .dealItemList(Collections.singletonList(orderItem))
                .userId("user123")
                .build();

        // 2. Mockä¾èµ–æœåŠ¡
        when(purchaseDealBroker.arrange(any())).thenReturn(mockContext);

        // 3. æ‰§è¡Œæµ‹è¯•
        PurchaseDealResponse response = dealApi.purchaseDeal(ctx, request);

        // 4. éªŒè¯ç»“æœ
        assertNotNull(response);
        assertEquals(response.getOrderId(), "order789");

        // 5. éªŒè¯ä¾èµ–è°ƒç”¨
        verify(purchaseDealBroker, times(1)).arrange(any());
    }

    // æµ‹è¯•åœºæ™¯ï¼šç©ºå•†å“åˆ—è¡¨çš„è¾¹ç•Œæƒ…å†µ
    @Test(expectedExceptions = IllegalArgumentException.class)
    public void testPurchaseDeal_EmptyDealItems() {
        PurchaseDealRequest request = PurchaseDealRequest.builder()
                .dealItemList(Collections.emptyList())
                .userId("user123")
                .build();

        dealApi.purchaseDeal(ctx, request);
    }
}
```
#### Mockä½¿ç”¨è§„èŒƒ

- è¢«æµ‹è¯•ç±»æ‰€ä¾èµ–çš„æ‰€æœ‰å¤–éƒ¨ç»„ä»¶ï¼ˆå…¶ä»–Serviceã€Brokerç­‰ï¼‰éƒ½åº”è¯¥ä½¿ç”¨ Mockito è¿›è¡ŒMock
- é™æ€æ–¹æ³•è°ƒç”¨ä¸€èˆ¬ä¸éœ€è¦mock

**åŸºæœ¬ç¤ºä¾‹**ï¼š
```java
@Slf4j
class UserServiceTest {

    @Mock
    private OrderService orderService;

    @InjectMocks
    private UserService userService;

    @Test
    void testGetUserWithOrderCount() {
        // å‡†å¤‡æµ‹è¯•æ•°æ®
        Long userId = 1L;
        int mockOrderCount = 5;

        // Mockä¾èµ–è¡Œä¸º
        when(orderService.countOrdersByUserId(any(Long.class))).thenReturn(mockOrderCount);

        // æ‰§è¡Œæµ‹è¯•
        UserInfo result = userService.getUserWithOrderCount(userId);

        // éªŒè¯ç»“æœ
        assertEquals(result.getOrderCount(), mockOrderCount);
        verify(orderService, times(1)).countOrdersByUserId(eq(userId));
    }
}
```
#### æ–­è¨€è§„èŒƒä¸ç¤ºä¾‹

##### 1. åŸºæœ¬å¯¹è±¡æ–­è¨€
```java
@Test
public void testCreateUser_Success() {
    UserVo result = userService.createUser("å¼ ä¸‰", "zhangsan@example.com", 25);
    
    assertNotNull(result);
    assertEquals(result.getName(), "å¼ ä¸‰");
    assertEquals(result.getEmail(), "zhangsan@example.com");
    assertTrue(result.getId() > 0);
}
```

##### 2. Listå¯¹è±¡æ–­è¨€
```java
@Test
public void testQueryUserOrders_Success() {
    List<OrderVo> orders = orderService.queryUserOrders("user123");
    
    assertNotNull(orders);
    assertEquals(orders.size(), 3);
    
    // éªŒè¯æ¯ä¸ªå…ƒç´ 
    for (OrderVo order : orders) {
        assertNotNull(order.getOrderId());
        assertTrue(order.getTotalAmount().compareTo(BigDecimal.ZERO) > 0);
    }
}
```

##### 3. å¼‚å¸¸æ–­è¨€
**æ–¹å¼1ï¼šä½¿ç”¨expectedExceptionsæ³¨è§£**
```java
@Test(expectedExceptions = ValidationException.class, 
      expectedExceptionsMessageRegExp = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®.*")
public void testCreateUser_InvalidEmail() {
    userService.createUser("å¼ ä¸‰", "invalid-email", 25);
}
```

**æ–¹å¼2ï¼šä½¿ç”¨Assert.expectThrowsæ–¹æ³•ï¼ˆæ¨èï¼‰**
```java
@Test
public void testCreateUser_InvalidEmail() {
    ValidationException exception = Assert.expectThrows(ValidationException.class, () -> {
        userService.createUser("å¼ ä¸‰", "invalid-email", 25);
    });
    
    assertNotNull(exception);
    assertTrue(exception.getMessage().contains("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"));
}
```


## æµ‹è¯•æ•°æ®ç®¡ç†

### æµ‹è¯•æ•°æ®æ„é€ ç­–ç•¥

#### 1. ä½¿ç”¨Builderæ¨¡å¼æ„é€ å¤æ‚å¯¹è±¡
å¯¹äºä½¿ç”¨Lombok @Builderæˆ–@SuperBuilderæ³¨è§£çš„ç±»ï¼Œåº”ä½¿ç”¨builderæ¨¡å¼æ„é€ æµ‹è¯•æ•°æ®ï¼š

```java
@Test
public void testComplexObjectConstruction() {
    OrderVo order = OrderVo.builder()
            .orderId("ORDER_123")
            .userId("user123")
            .status(OrderStatus.PENDING)
            .totalAmount(new BigDecimal("299.99"))
            .build();
}
```

#### 2. æµ‹è¯•æ•°æ®å·¥å‚æ–¹æ³•
åˆ›å»ºä¸“é—¨çš„å·¥å‚æ–¹æ³•æ¥ç”Ÿæˆæ ‡å‡†æµ‹è¯•æ•°æ®ï¼š

```java
public class TestDataFactory {
    
    public static UserVo createStandardUser() {
        return UserVo.builder()
                .userId("user_123")
                .name("æµ‹è¯•ç”¨æˆ·")
                .email("test@example.com")
                .age(25)
                .build();
    }
}

// åœ¨æµ‹è¯•ç±»ä¸­ä½¿ç”¨
@Test
public void testWithFactoryData() {
    UserVo user = TestDataFactory.createStandardUser();
    // æ‰§è¡Œæµ‹è¯•...
}
```

#### 3. å‚æ•°åŒ–æµ‹è¯•æ•°æ®
ä½¿ç”¨TestNGçš„DataProvideræä¾›å¤šç»„æµ‹è¯•æ•°æ®ï¼š

```java
@DataProvider(name = "userValidationData")
public Object[][] provideUserValidationData() {
    return new Object[][] {
        {"å¼ ä¸‰", "zhangsan@example.com", 25, true},
        {"", "empty@example.com", 25, false},
        {"ç‹äº”", "invalid-email", 25, false},
    };
}

@Test(dataProvider = "userValidationData")
public void testUserValidation(String name, String email, int age, boolean expectedValid) {
    UserCreateRequest request = UserCreateRequest.builder()
            .name(name).email(email).age(age).build();
    
    if (expectedValid) {
        assertDoesNotThrow(() -> userService.validateUser(request));
    } else {
        assertThrows(ValidationException.class, 
                () -> userService.validateUser(request));
    }
}
```

## å¸¸è§æµ‹è¯•åœºæ™¯ç¤ºä¾‹

### 1. æœåŠ¡å±‚(Service)æµ‹è¯•ç¤ºä¾‹

```java
@Slf4j
public class UserServiceImplTest {

    @InjectMocks
    private UserServiceImpl userService;

    @Mock
    private UserMapper userMapper;

    @BeforeMethod
    public void setUp() {
        MockitoAnnotations.openMocks(this);
    }

    @Test
    public void testCreateUser_Success() {
        UserCreateRequest request = UserCreateRequest.builder()
                .username("testuser")
                .email("test@example.com")
                .build();

        User savedUser = new User();
        savedUser.setUserId("user123");

        when(userMapper.findByUsername("testuser")).thenReturn(null);
        when(userMapper.insert(any(User.class))).thenReturn(1);

        Result<UserVo> result = userService.createUser(request);

        assertTrue(result.isSuccess());
        verify(userMapper, times(1)).findByUsername("testuser");
    }
}
```

### 2. æ§åˆ¶å™¨(Controller)æµ‹è¯•ç¤ºä¾‹

```java
@Slf4j
public class UserControllerTest {

    @InjectMocks
    private UserController userController;

    @Mock
    private UserService userService;

    @BeforeMethod
    public void setUp() {
        MockitoAnnotations.openMocks(this);
    }

    @Test
    public void testGetUser_Success() {
        String userId = "user123";
        UserVo expectedUser = UserVo.builder()
                .userId(userId)
                .username("testuser")
                .build();

        when(userService.getUserById(userId)).thenReturn(Result.fromSuccess(expectedUser));

        ApiResponse<UserVo> response = userController.getUser(context, userId);

        assertTrue(response.isSuccess());
        assertEquals(response.getData().getUserId(), userId);
    }
}
```

### 3. å·¥å…·ç±»(Utility)æµ‹è¯•ç¤ºä¾‹

```java
@Slf4j
public class DateUtilTest {

    @Test
    public void testFormatDate_Success() {
        Date testDate = new Date(1640995200000L);
        String result = DateUtil.formatDate(testDate, "yyyy-MM-dd HH:mm:ss");
        assertEquals(result, "2022-01-01 00:00:00");
    }

    @Test(expectedExceptions = IllegalArgumentException.class)
    public void testParseDate_EmptyString() {
        DateUtil.parseDate("", "yyyy-MM-dd");
    }
}
```

## AI æµ‹è¯•ç”ŸæˆæŒ‡å¯¼åŸåˆ™

### ğŸ¤– ç”Ÿæˆç­–ç•¥
- âœ… **è´¨é‡ç¬¬ä¸€**: ä¼˜å…ˆä¿è¯ç”Ÿæˆçš„æµ‹è¯•èƒ½å¤Ÿç¼–è¯‘é€šè¿‡å¹¶æ­£ç¡®æ‰§è¡Œ
- ğŸ¯ **å…¨é¢è¦†ç›–**: ç”Ÿæˆå…¨é¢çš„æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬æ­£å¸¸æµç¨‹ã€è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸å¤„ç†
- ğŸ“‹ **åœºæ™¯ä¸°å¯Œ**: æ ¹æ®å‡½æ•°ç‰¹æ€§å’Œä¸šåŠ¡é€»è¾‘ç”Ÿæˆå¤šç§æµ‹è¯•åœºæ™¯

### ğŸ”’ å®‰å…¨çš„æµ‹è¯•ç”Ÿæˆæµç¨‹

**æ–°æ–‡ä»¶ç”Ÿæˆæ¨¡å¼**ï¼š
1. **åˆ›å»ºä¸´æ—¶æµ‹è¯•æ–‡ä»¶**: åœ¨æ–°çš„ä¸´æ—¶ Java æ–‡ä»¶ä¸­ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹(å¦‚'DealApiImplTempTest.java')
2. **å®Œæˆæ‰€æœ‰éªŒè¯æ­¥éª¤**: åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­å®Œæˆç¼–è¯‘ã€æµ‹è¯•è¿è¡Œç­‰æ‰€æœ‰éªŒè¯
3. **ç¡®è®¤æµ‹è¯•é€šè¿‡**: åªæœ‰å½“æ‰€æœ‰æµ‹è¯•éƒ½æˆåŠŸè¿è¡Œåï¼Œæ‰è¿›è¡Œåˆå¹¶æ“ä½œ
4. **å®‰å…¨åˆå¹¶**: å°†éªŒè¯é€šè¿‡çš„æµ‹è¯•ä»£ç åˆå¹¶åˆ°åŸæµ‹è¯•æ–‡ä»¶ä¸­
5. **æ¸…ç†ä¸´æ—¶æ–‡ä»¶**: åˆå¹¶å®Œæˆååˆ é™¤ä¸´æ—¶æ–‡ä»¶

**è¯¦ç»†æ‰§è¡Œæ­¥éª¤**ï¼š

**ç¬¬1æ­¥ï¼šåˆ›å»ºä¸´æ—¶æµ‹è¯•æ–‡ä»¶**

**ç¬¬2æ­¥ï¼šç”Ÿæˆæµ‹è¯•ç”¨ä¾‹**
- åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ç”Ÿæˆå®Œæ•´çš„æµ‹è¯•ç±»ä¸æµ‹è¯•å‡½æ•°
- åŒ…å«å¿…è¦çš„importè¯­å¥
- ä¿®å¤è¯­æ³•é—®é¢˜,æ¯”å¦‚è°ƒç”¨ä¸å­˜åœ¨çš„æ–¹æ³•,å¼•ç”¨äº†ä¸å­˜åœ¨çš„åŒ…

**ç¬¬3æ­¥ï¼šéªŒè¯æµ‹è¯•**
éªŒè¯æµ‹è¯•å¿…é¡»æŒ‰å¦‚ä¸‹æ­¥éª¤è¿›è¡Œ:
1. è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ä¸‹,ç¼–è¯‘é¡¹ç›®å¹¶å®‰è£…ä¾èµ–,è¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:
```bash
export JAVA_HOME=<JAVAHOME>
export PATH=${JAVA_HOME}/bin:$PATH
mvn compile -DskipTests
mvn install -Dmaven.test.skip=true
```
2. æ‰§è¡Œæµ‹è¯•æ—¶ä¸€å®šè¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹é€šè¿‡å‘½ä»¤ï¼š**mvn test -pl <æ¨¡å—å> -Dtest=<æµ‹è¯•ç±»å> -Dsurefire.failIfNoSpecifiedTests=false** æ¥æ‰§è¡Œï¼Œä½¿ç”¨æ­¤å‘½ä»¤åªæ‰§è¡Œæœ¬æ¬¡ä¼šè¯ç”Ÿæˆæˆ–å˜æ›´çš„æµ‹è¯•ç±»,ä¾‹å¦‚:
```bash
export JAVA_HOME=<JAVAHOME>
export PATH=${JAVA_HOME}/bin:$PATH
mvn -q --no-transfer-progress test -pl tccp-trade-api -am -Dtest=DealApiImplTempTest -Dsurefire.failIfNoSpecifiedTests=false
```

**ç¬¬4æ­¥ï¼šä¿®å¤é—®é¢˜ï¼ˆå¦‚æœ‰ï¼‰**
- å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œåªåœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ä¿®å¤
- é‡å¤ç¬¬3æ­¥éªŒè¯ï¼Œç›´åˆ°æµ‹è¯•é€šè¿‡

**ç¬¬5æ­¥ï¼šå®‰å…¨åˆå¹¶**
- å°†éªŒè¯é€šè¿‡çš„æµ‹è¯•å‡½æ•°å¤åˆ¶åˆ°åŸæµ‹è¯•æ–‡ä»¶
- ç¡®ä¿ä¸ç ´ååŸæ–‡ä»¶çš„å…¶ä»–å†…å®¹

**ç¬¬6æ­¥ï¼šæ¸…ç†ä¸´æ—¶æ–‡ä»¶**

### ğŸš¨ é‡è¦å®‰å…¨æé†’

1. **ç»å¯¹ä¸å…è®¸ç›´æ¥ä¿®æ”¹åŸæµ‹è¯•æ–‡ä»¶**: å§‹ç»ˆåœ¨ä¸´æ—¶æ–‡ä»¶ä¸­å·¥ä½œï¼Œç›´åˆ°æµ‹è¯•å®Œå…¨é€šè¿‡
2. **åˆå¹¶æ—¶ä¿æŒè°¨æ…**: åªå¤åˆ¶æµ‹è¯•å‡½æ•°ï¼Œä¸è¦ä¿®æ”¹åŸæ–‡ä»¶çš„å…¶ä»–éƒ¨åˆ†
3. **éªŒè¯åˆå¹¶ç»“æœ**: åˆå¹¶åå¿…é¡»å†æ¬¡è¿è¡Œæµ‹è¯•ç¡®ä¿æ²¡æœ‰é—®é¢˜

## é¡¹ç›®ç‰¹å®šçš„æµ‹è¯•æ³¨æ„äº‹é¡¹
> ğŸ“ **ç¤ºä¾‹è¯´æ˜**: ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„ç±»å‹å’Œæ–¹æ³•åä»…ä½œä¸ºç¤ºä¾‹æ¼”ç¤ºï¼Œéœ€è¦æ ¹æ®é¡¹ç›®å®é™…çš„ç±»å‹å‘½åè¿›è¡Œæ›¿æ¢ã€‚

### Lombokæ³¨è§£ä½¿ç”¨è§„èŒƒ
é¡¹ç›®ä¸­ä½¿ç”¨lombokæ’ä»¶ç®€åŒ–javaä»£ç ï¼Œåœ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

#### 1. @Builder å’Œ @SuperBuilder æ³¨è§£çš„ç±»
å¦‚æœç±»è¢« **@Builder** æˆ– **@SuperBuilder** æ³¨è§£ä¿®é¥°ï¼Œå¿…é¡»ä½¿ç”¨builderæ¨¡å¼æ„é€ å¯¹è±¡ï¼š

**@Builderæ³¨è§£ç±»çš„æ„é€ ç¤ºä¾‹ï¼š**
```java
@Data
@Builder
public class DemandDto {
    @NotNull
    private Demand demand;
    private List<Deal> dealList;
    private String status;
}

// æµ‹è¯•ç”¨ä¾‹ä¸­æ„é€ DemandDto
@Test
public void testDemandDtoConstruction() {
    Demand demand = new Demand();
    demand.setDemandId("demand123");
    
    DemandDto demandDto = DemandDto.builder()
            .demand(demand)                    // å¿…å¡«å­—æ®µï¼ˆ@NotNullï¼‰
            .dealList(Collections.emptyList()) // å¯é€‰å­—æ®µ
            .status("ACTIVE")                 // å¯é€‰å­—æ®µ
            .build();
    
    assertNotNull(demandDto);
    assertEquals(demandDto.getStatus(), "ACTIVE");
}
```

**@SuperBuilderæ³¨è§£ç±»çš„æ„é€ ç¤ºä¾‹ï¼š**
```java
@Data
@SuperBuilder
public class PurchaseDealRequest extends BaseRequest {
    @NotNull
    private List<PurchaseOrderItemBo> dealItemList;
    private String paymentMethod;
}

// æµ‹è¯•ç”¨ä¾‹ä¸­æ„é€ PurchaseDealRequest
@Test
public void testPurchaseDealRequestConstruction() {
    List<PurchaseOrderItemBo> dealItems = Arrays.asList(
        PurchaseOrderItemBo.builder()
            .spuId("spu001")
            .quantity(2)
            .build()
    );
    
    PurchaseDealRequest request = PurchaseDealRequest.builder()
            .requestId("req_123")           // çˆ¶ç±»å­—æ®µ
            .userId("user123")              // çˆ¶ç±»å­—æ®µ
            .dealItemList(dealItems)        // å­ç±»å­—æ®µï¼ˆå¿…å¡«ï¼‰
            .paymentMethod("BALANCE")       // å­ç±»å­—æ®µï¼ˆå¯é€‰ï¼‰
            .build();
    
    assertNotNull(request);
    assertEquals(request.getUserId(), "user123");
}
```

#### 2. é™æ€å·¥å‚æ–¹æ³•æ„é€ 
é¡¹ç›®ä¸­æœ‰äº›ç±»æä¾›é™æ€æ–¹æ³•æ¥æ„é€ å¯¹è±¡ï¼š
```java
@Data
public class Result<T> {
    private boolean success;
    private T data;
    private String code;

    protected Result() {} // æ„é€ å‡½æ•°ä¸ºprotected

    public static <T> Result<T> fromSuccess(T data) {
        Result<T> result = new Result<>();
        result.setSuccess(true);
        result.setData(data);
        return result;
    }
}

// æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•
@Test
public void testResultConstruction() {
    UserVo userData = new UserVo("user123", "å¼ ä¸‰");
    Result<UserVo> successResult = Result.fromSuccess(userData);
    
    assertTrue(successResult.isSuccess());
    assertEquals(successResult.getData().getName(), "å¼ ä¸‰");
}
```

#### 3. æ™®é€š@Dataæ³¨è§£ç±»æ„é€ 
å¯¹äºåªä½¿ç”¨@Dataæ³¨è§£çš„ç±»ï¼Œå¯ä»¥ä½¿ç”¨newå…³é”®å­—æ„é€ ï¼š
```java
@Data
public class QueryDealShipmentRequest {
    @NotNull
    private List<String> dealIds;
    private String userId;
}

// æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨newå…³é”®å­—æ„é€ å¯¹è±¡
@Test
public void testQueryDealShipmentRequestConstruction() {
    QueryDealShipmentRequest request = new QueryDealShipmentRequest();
    
    request.setDealIds(Arrays.asList("deal001", "deal002"));
    request.setUserId("user123");
    
    assertNotNull(request);
    assertEquals(request.getDealIds().size(), 2);
}
```

#### å¯¹è±¡æ„é€ æœ€ä½³å®è·µæ€»ç»“

1. **è¯†åˆ«æ³¨è§£ç±»å‹**ï¼š
   - `@Builder/@SuperBuilder` â†’ ä½¿ç”¨builderæ¨¡å¼
   - `private/protectedæ„é€ å‡½æ•° + é™æ€æ–¹æ³•` â†’ ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•
   - `@Data` â†’ ä½¿ç”¨newå…³é”®å­— + setteræ–¹æ³•

2. **å¤„ç†å¿…å¡«å­—æ®µ**ï¼š
   - `@NotNull/@NonNull` â†’ å¿…é¡»èµ‹å€¼ï¼Œä¸èƒ½ä¸ºnull

3. **é¿å…å¸¸è§é”™è¯¯**ï¼š
   - ä¸è¦ç¼–é€ ä¸å­˜åœ¨çš„æ–¹æ³•
   - ä¸è¦æ··ç”¨æ„é€ æ–¹å¼
   - éµå¾ªå®é™…çš„æ–¹æ³•ç­¾å