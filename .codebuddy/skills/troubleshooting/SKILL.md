---
name: troubleshooting
description: >
  问题诊断与Bug修复。当用户提到报错、bug、不工作、显示不对、崩溃、异常、
  失败、undefined、null、500、404时激活此技能。
---

# 问题诊断与排障 (Troubleshooting)

分析错误现象，定位根因，提供修复方案。

## 诊断流程

```
错误现象 → 信息收集 → 根因假设 → 验证路径 → 修复方案
```

## 信息收集清单

| 信息类型 | 获取方式 |
|---------|---------|
| 错误截图 | 用户提供 |
| 浏览器控制台 | F12 → Console |
| 网络请求 | F12 → Network |
| 后端日志 | 控制台输出 |

## 常见问题模式

### 前端页面不显示数据

**检查顺序**：
1. Console 是否有 JS 错误
2. Network 中 API 是否成功（200）
3. API 返回数据格式是否正确
4. JS 是否正确解析数据

**常见原因**：JS 语法错误、API 返回 `success: false`、字段名不匹配

### 后端接口报错

**检查顺序**：
1. 请求参数是否正确
2. Controller 路径是否匹配
3. Service 层是否有异常
4. 数据库查询是否正确

**常见原因**：参数类型不匹配、空指针、数据库字段缺失

## 本项目常见坑

| 问题 | 原因 | 解决方案 |
|------|------|---------|
| JS 变量重复声明 | 多脚本定义同名 const | 检查所有 JS 文件 |
| API 数据不显示 | success=false | Console 打印完整响应 |
| 数据库字段缺失 | schema.sql 未更新 | 手动执行 ALTER TABLE |

## 诊断报告模板

```markdown
## 问题诊断报告

### 📌 问题现象
[描述问题]

### 🔎 信息收集
- **控制台**：[有/无错误]
- **网络请求**：[状态码/响应]
- **后端日志**：[有/无异常]

### 🎯 根因分析
[主要原因]

### 🛠️ 修复方案
[具体修复步骤]

### ✅ 验证方法
[如何验证已修复]
```
