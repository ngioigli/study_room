<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¼šå‘˜ä¸­å¿ƒ - äº‘ç«¯è‡ªä¹ å®¤</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/components.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: var(--font-family);
            background: var(--color-bg);
            min-height: 100vh;
            padding-bottom: 100px;
        }

        /* é¡¶éƒ¨åŒºåŸŸ */
        .header {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            padding: 60px var(--space-5) var(--space-8);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: 'ğŸ‘‘';
            position: absolute;
            right: -20px;
            top: 20px;
            font-size: 120px;
            opacity: 0.15;
        }

        .header-title {
            font-size: 17px;
            font-weight: 600;
            color: white;
            text-align: center;
            margin-bottom: var(--space-6);
        }

        /* ä¼šå‘˜å¡ç‰‡ */
        .member-card {
            position: relative;
            z-index: 1;
        }

        .member-status {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-3);
        }

        .member-icon {
            font-size: 48px;
        }

        .member-info h2 {
            font-size: 22px;
            font-weight: 700;
            color: white;
            margin-bottom: 4px;
        }

        .member-info p {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
        }

        /* æƒç›Šå¡ç‰‡ */
        .benefits-card {
            background: white;
            border-radius: var(--radius-xl);
            margin: -30px var(--space-4) 0;
            padding: var(--space-5);
            box-shadow: var(--shadow-lg);
            position: relative;
            z-index: 10;
        }

        .benefits-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-3);
        }

        .benefit-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: var(--space-3);
        }

        .benefit-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #FFF5E6, #FFE4CC);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .benefit-label {
            font-size: 12px;
            color: var(--color-text-secondary);
            text-align: center;
        }

        /* ä¸»å®¹å™¨ */
        .container {
            padding: var(--space-5) var(--space-4);
        }

        /* å¥—é¤é€‰æ‹© */
        .plans-section {
            margin-bottom: var(--space-5);
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: var(--space-4);
        }

        .plans-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-3);
        }

        .plan-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition-normal);
            position: relative;
            box-shadow: var(--shadow-sm);
        }

        .plan-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .plan-card.selected {
            border-color: #FFD700;
            background: linear-gradient(135deg, #FFFBEB, white);
        }

        .plan-card.popular::before {
            content: 'æ¨è';
            position: absolute;
            top: -10px;
            right: -10px;
            background: linear-gradient(135deg, #FF6B6B, #EE5A5A);
            color: white;
            font-size: 10px;
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-weight: 600;
        }

        .plan-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 8px;
        }

        .plan-price {
            font-size: 28px;
            font-weight: 700;
            color: #FFB800;
            margin-bottom: 4px;
        }

        .plan-price span {
            font-size: 14px;
            font-weight: 400;
        }

        .plan-original {
            font-size: 12px;
            color: var(--color-text-tertiary);
            text-decoration: line-through;
        }

        .plan-desc {
            font-size: 11px;
            color: var(--color-text-secondary);
            margin-top: 8px;
        }

        /* è´­ä¹°æŒ‰é’® */
        .purchase-btn {
            width: 100%;
            padding: var(--space-4);
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border: none;
            border-radius: var(--radius-lg);
            font-size: 16px;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: var(--transition-normal);
            box-shadow: 0 8px 24px rgba(255, 165, 0, 0.3);
            margin-bottom: var(--space-5);
        }

        .purchase-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(255, 165, 0, 0.4);
        }

        .purchase-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* æƒç›Šè¯¦æƒ… */
        .details-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            box-shadow: var(--shadow-sm);
        }

        .detail-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-3);
            padding: var(--space-3) 0;
            border-bottom: 1px solid var(--color-border);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-icon {
            font-size: 20px;
            margin-top: 2px;
        }

        .detail-content h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 4px;
        }

        .detail-content p {
            font-size: 12px;
            color: var(--color-text-secondary);
            line-height: 1.5;
        }

        /* æç¤ºä¿¡æ¯ */
        .tips {
            margin-top: var(--space-5);
            padding: var(--space-4);
            background: var(--color-card-bg);
            border-radius: var(--radius-md);
        }

        .tips-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--color-text-secondary);
            margin-bottom: 8px;
        }

        .tips-list {
            font-size: 12px;
            color: var(--color-text-tertiary);
            line-height: 1.8;
        }

        .tips-list li {
            list-style: none;
            padding-left: 16px;
            position: relative;
        }

        .tips-list li::before {
            content: 'â€¢';
            position: absolute;
            left: 0;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨åŒºåŸŸ -->
    <div class="header">
        <div class="header-title">ä¼šå‘˜ä¸­å¿ƒ</div>
        <div class="member-card">
            <div class="member-status">
                <div class="member-icon">ğŸ‘‘</div>
                <div class="member-info">
                    <h2 id="memberTitle">å¼€é€šä¼šå‘˜</h2>
                    <p id="memberDesc">è§£é”æ›´å¤šä¸“å±åŠŸèƒ½</p>
                </div>
            </div>
        </div>
    </div>

    <!-- æƒç›Šå¡ç‰‡ -->
    <div class="benefits-card">
        <div class="benefits-title">
            <span>âœ¨</span> ä¼šå‘˜ä¸“å±æƒç›Š
        </div>
        <div class="benefits-grid">
            <div class="benefit-item">
                <div class="benefit-icon">â±ï¸</div>
                <div class="benefit-label">æ— é™ä¸“æ³¨</div>
            </div>
            <div class="benefit-item">
                <div class="benefit-icon">ğŸµ</div>
                <div class="benefit-label">ä¸“å±éŸ³æ•ˆ</div>
            </div>
            <div class="benefit-item">
                <div class="benefit-icon">ğŸ±</div>
                <div class="benefit-label">å® ç‰©çš®è‚¤</div>
            </div>
            <div class="benefit-item">
                <div class="benefit-icon">â˜ï¸</div>
                <div class="benefit-label">äº‘ç«¯åŒæ­¥</div>
            </div>
        </div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- å¥—é¤é€‰æ‹© -->
        <div class="plans-section">
            <div class="section-title">é€‰æ‹©å¥—é¤</div>
            <div class="plans-grid">
                <div class="plan-card" onclick="selectPlan('month')">
                    <div class="plan-name">æœˆå¡</div>
                    <div class="plan-price">Â¥29<span>/æœˆ</span></div>
                    <div class="plan-original">Â¥39</div>
                    <div class="plan-desc">é¦–æœˆç‰¹æƒ </div>
                </div>
                <div class="plan-card popular selected" onclick="selectPlan('quarter')">
                    <div class="plan-name">å­£å¡</div>
                    <div class="plan-price">Â¥79<span>/å­£</span></div>
                    <div class="plan-original">Â¥117</div>
                    <div class="plan-desc">çœ38å…ƒ</div>
                </div>
                <div class="plan-card" onclick="selectPlan('year')">
                    <div class="plan-name">å¹´å¡</div>
                    <div class="plan-price">Â¥199<span>/å¹´</span></div>
                    <div class="plan-original">Â¥468</div>
                    <div class="plan-desc">çœ269å…ƒ</div>
                </div>
            </div>
        </div>

        <!-- è´­ä¹°æŒ‰é’® -->
        <button class="purchase-btn" onclick="purchase()">
            ç«‹å³å¼€é€š Â· Â¥79
        </button>

        <!-- æƒç›Šè¯¦æƒ… -->
        <div class="details-section">
            <div class="section-title">æƒç›Šè¯¦æƒ…</div>
            <div class="detail-item">
                <span class="detail-icon">â±ï¸</span>
                <div class="detail-content">
                    <h4>æ— é™ä¸“æ³¨æ—¶é•¿</h4>
                    <p>æ™®é€šç”¨æˆ·æ¯æ—¥ä¸“æ³¨ä¸Šé™4å°æ—¶ï¼Œä¼šå‘˜æ— é™åˆ¶</p>
                </div>
            </div>
            <div class="detail-item">
                <span class="detail-icon">ğŸµ</span>
                <div class="detail-content">
                    <h4>ä¸“å±ç™½å™ªéŸ³</h4>
                    <p>è§£é”20+ä¸“å±ç™½å™ªéŸ³éŸ³æ•ˆï¼ŒåŒ…æ‹¬å’–å•¡å…ã€å›¾ä¹¦é¦†ç­‰åœºæ™¯</p>
                </div>
            </div>
            <div class="detail-item">
                <span class="detail-icon">ğŸ±</span>
                <div class="detail-content">
                    <h4>å® ç‰©çš®è‚¤</h4>
                    <p>è§£é”ç¨€æœ‰å® ç‰©çš®è‚¤ï¼Œè®©ä½ çš„å­¦ä¹ ä¼™ä¼´æ›´ç‹¬ç‰¹</p>
                </div>
            </div>
            <div class="detail-item">
                <span class="detail-icon">â˜ï¸</span>
                <div class="detail-content">
                    <h4>æ•°æ®äº‘åŒæ­¥</h4>
                    <p>å­¦ä¹ æ•°æ®å¤šç«¯åŒæ­¥ï¼Œæ¢è®¾å¤‡ä¹Ÿä¸ä¸¢å¤±è®°å½•</p>
                </div>
            </div>
            <div class="detail-item">
                <span class="detail-icon">ğŸ</span>
                <div class="detail-content">
                    <h4>ä¸“å±å¾½ç« </h4>
                    <p>è·å¾—ä¼šå‘˜ä¸“å±å¾½ç« ï¼Œå½°æ˜¾å°Šè´µèº«ä»½</p>
                </div>
            </div>
        </div>

        <!-- æç¤ºä¿¡æ¯ -->
        <div class="tips">
            <div class="tips-title">æ¸©é¦¨æç¤º</div>
            <ul class="tips-list">
                <li>ä¼šå‘˜æœåŠ¡å¼€é€šåç«‹å³ç”Ÿæ•ˆ</li>
                <li>ä¼šå‘˜æœŸé—´å¯éšæ—¶å–æ¶ˆè‡ªåŠ¨ç»­è´¹</li>
                <li>å¦‚æœ‰é—®é¢˜è¯·è”ç³»å®¢æœ</li>
            </ul>
        </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆª -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <span class="nav-icon">ğŸ </span>
            <span class="nav-label">è‡ªä¹ å®¤</span>
        </a>
        <a href="study.html" class="nav-item">
            <span class="nav-icon">ğŸ“š</span>
            <span class="nav-label">å­¦ä¹ å°å±‹</span>
        </a>
        <a href="member.html" class="nav-item active">
            <span class="nav-icon">ğŸ‘‘</span>
            <span class="nav-label">ä¼šå‘˜</span>
        </a>
        <a href="profile.html" class="nav-item">
            <span class="nav-icon">ğŸ‘¤</span>
            <span class="nav-label">æˆ‘çš„</span>
        </a>
    </nav>

    <script src="js/nav.js"></script>
    <script>
        let selectedPlan = 'quarter';
        const prices = {
            month: 29,
            quarter: 79,
            year: 199
        };

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç”¨æˆ·ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', loadUserMemberStatus);

        async function loadUserMemberStatus() {
            try {
                const res = await fetch('/api/user/info');
                const data = await res.json();
                
                if (data.success && data.user) {
                    const user = data.user;
                    // æ£€æŸ¥ä¼šå‘˜çŠ¶æ€ï¼ˆç›®å‰åç«¯æ²¡æœ‰ä¼šå‘˜å­—æ®µï¼Œå¯ä»¥æ ¹æ®roleåˆ¤æ–­æˆ–åç»­æ‰©å±•ï¼‰
                    if (user.role === 'admin') {
                        document.getElementById('memberTitle').textContent = 'ç®¡ç†å‘˜';
                        document.getElementById('memberDesc').textContent = 'æ‚¨å·²æ‹¥æœ‰ç®¡ç†å‘˜æƒé™';
                    } else if (user.role === 'vip') {
                        document.getElementById('memberTitle').textContent = 'å°Šè´µä¼šå‘˜';
                        document.getElementById('memberDesc').textContent = 'æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼';
                    }
                }
            } catch (err) {
                console.error('åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', err);
            }
        }

        function selectPlan(plan) {
            selectedPlan = plan;
            
            // æ›´æ–°é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.plan-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // æ›´æ–°æŒ‰é’®ä»·æ ¼
            document.querySelector('.purchase-btn').textContent = `ç«‹å³å¼€é€š Â· Â¥${prices[plan]}`;
        }

        function purchase() {
            alert('ä¼šå‘˜åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼\n\nå½“å‰é€‰æ‹©ï¼š' + 
                (selectedPlan === 'month' ? 'æœˆå¡' : selectedPlan === 'quarter' ? 'å­£å¡' : 'å¹´å¡') + 
                ' Â¥' + prices[selectedPlan]);
        }
    </script>
</body>
</html>
