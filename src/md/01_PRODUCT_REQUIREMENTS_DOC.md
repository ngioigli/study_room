# Product Requirements Document (PRD) - 智能自习室管理与助学平台

**版本**: V2.3 (纯 HTML 前端版本)
**最后更新**: 2026-01-20
**状态**: 核心功能已完成，项目已开源


---

## 1. 产品概述 (Product Overview)

### 1.1 核心价值主张
本产品旨在解决传统付费自习室"管理僵化"与"缺乏情感关怀"的痛点。
通过构建一套**软硬协同的 O2O 系统**，实现：
1.  **线下 (Offline)**：通过动态令牌与抢占式锁定机制，实现低成本、高秩序的无人值守门禁管理。
2.  **线上 (Online)**：提供沉浸式专注工具与游戏化激励体系，缓解备考群体的焦虑感，提升学习效率。

### 1.2 核心理念
*   **硬核管理**：一人一码，原子化通行窗口，杜绝混乱。
*   **柔性助学**：不仅仅是开门工具，更是陪伴用户的"云端书桌"。
*   **正向反馈**：将枯燥的"时长"转化为可视化的"成就"和"宠物成长"。

---

## 2. 用户画像 (User Persona)

*   **核心用户**：考研党、考公党、证书备考职场人。
*   **关键特征**：
    *   **高焦虑**：担心考不上，进度慢。
    *   **孤独感**：独自学习，渴望陪伴但害怕无效社交。
    *   **需要秩序**：讨厌抢座、讨厌环境嘈杂。
*   **使用场景**：
    *   拿出手机 -> 扫码开门 (门禁) -> 手机开启专注模式 (助学) -> 结束离座 (结算/养成)。

---

## 3. 功能需求清单 (Functional Requirements)

### 3.1 智能门禁模块 (Smart Access Control)
*   **[P0] 动态二维码展示**：
    *   实时同步线下小程序的动态鉴权码。
    *   必须对图像进行压缩与高斯模糊处理（默认状态）。
*   **[P0] 抢占式防冲突逻辑 (The Atomic Lock)**：
    *   **触发条件**：用户点击"扫码入座"。
    *   **执行动作**：全局锁定资源 3 分钟。
    *   **状态反馈**：
        *   锁定者：看到清晰二维码 + 倒计时。
        *   旁观者：看到"通道占用中"提示 + 倒计时。
*   **[P1] 防尾随数据支撑**：
    *   建立"通行时间窗"日志，为后续接入硬件传感器（红外/视觉）预留判定逻辑。

### 3.2 沉浸式助学模块 (Immersive Study)
*   **[P0] 专注模式 (Focus Mode)**：
    *   极简 UI，屏蔽所有干扰元素。
    *   **正向计时器**：记录单次专注时长。
    *   动态背景：随时间/状态微调的呼吸感背景。
*   **[P0] 白噪音电台 (Sound Dock)**：
    *   提供 4 种基础音效（雨声、篝火、森林、海浪）。
    *   支持**多轨混合播放**与**独立音量调节**。
    *   UI 需位于底部 Dock 栏，支持悬停显示。

### 3.3 游戏化与激励系统 (Gamification)
*   **[P1] 云端伴读宠物 (Cyber Pet)**：
    *   **孵化机制**：新用户获得一颗"蛋"。
    *   **成长逻辑**：`专注时长` = `经验值(EXP)`。
    *   **进化路线**：蛋 -> 幼年体 -> 成年体 -> 职业形态（如戴学士帽的猫）。
    *   **交互**：点击宠物随机弹出温暖/鼓励的气泡对话。
*   **[P1] 学习数据统计与画像**：
    *   统计并展示用户的学习时长分布与习惯。
    *   生成直观的学习报表或画像。
    *   辅助用户进行自我管理。
*   **[P2] 情绪碎纸机 (Tree Hole)**：
    *   用户输入负面情绪 -> 播放碎纸机动画 -> 数据不保存（物理销毁感）。
    *   提供心理暗示与压力宣泄出口。

### 3.4 商业化与账户 (Business - Planned)
*   **[P1] 账户体系**：目前为管理员邀请制，后续支持手机号注册。
*   **[P3] 权益管理**：
    *   支持购买"小时包"、"天卡"、"月卡"。
    *   扫码锁定前校验余额/有效期，不足则拦截。

---

## 4. 非功能性需求 (Non-functional Requirements)

*   **移动端适配**：必须优先适配 Mobile Web，禁止出现横向滚动条，按钮需适应手指触控区域。
*   **并发控制**：在多用户同时点击"锁定"时，必须保证**只有一个**用户能成功，其余用户收到明确提示。
*   **网络鲁棒性**：前端需具备断网/弱网下的状态自动恢复能力（Smart Polling 机制）。
*   **安全性**：
    *   所有 API 需进行 Token 校验。
    *   未登录用户严禁访问二维码页面。

---

## 5. 数据埋点需求 (Data Metrics)

*   **DAU (日活)**：每日登录用户数。
*   **通行效率**：每日扫码锁定次数 vs 实际开门次数（需硬件配合）。
*   **专注度**：用户平均单次专注时长。
*   **转化率**：(未来) 免费用户向付费套餐的转化率。

---

## 6. UI 设计规范概要

### 6.1 设计风格
- **风格定位**：iOS 风格极简设计，中性色调
- **主色调**：紫罗兰色 `#7C3AED`
- **背景色**：纯白 `#FFFFFF` + 浅灰卡片 `#F9FAFB`

### 6.2 导航架构
采用移动端优先的**底部 Tab Bar** 架构：

| Tab | 名称 | 功能 |
|-----|------|------|
| 1 | 自习室 | 扫码入座 + 座位状态 |
| 2 | 学习小屋 | 专注 + 白噪音 + 碎纸机 + 宠物 + 统计 |
| 3 | 会员 | 会员权益（预留） |
| 4 | 我的 | 个人信息 + 设置 + 留言板 |

### 6.3 详细规范
完整设计规范见：**`10_UI_DESIGN_SPECIFICATION.md`**

---
*End of PRD*