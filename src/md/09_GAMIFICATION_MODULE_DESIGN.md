# æ¸¸æˆåŒ–æ¿€åŠ±æ¨¡å—åŠŸèƒ½è®¾è®¡æ–‡æ¡£

**ç‰ˆæœ¬**: V2.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-01-05  
**æœ€åæ›´æ–°**: 2026-01-19  
**çŠ¶æ€**: å·²å®Œæˆï¼ˆV2.0 æƒ…ç»ªç¢çº¸æœºå…¨é¢å‡çº§ç‰ˆï¼‰

> **V2.0 æ›´æ–°**ï¼šæƒ…ç»ªç¢çº¸æœºå®Œæ•´ç§»æ¤ Bad-Mood-Crusher é¡¹ç›®
> - 4ç§ç²‰ç¢æ–¹å¼åŠ¨ç”»ï¼ˆç«ç®­ã€ç¢çº¸æœºã€æ³¡æ³¡ã€é»‘æ´ï¼‰
> - æ²»æ„ˆå›¢å­å‰ç¥¥ç‰©ï¼ˆæ ¹æ®çŠ¶æ€å˜åŒ–è¡¨æƒ…ï¼‰
> - å†å²è®°å½•åŠŸèƒ½ï¼ˆlocalStorage å­˜å‚¨æ²»æ„ˆæ—…ç¨‹ï¼‰
> - AI å®‰æ…°è¯è¯­ï¼ˆé¢„ç•™ Gemini API é…ç½®å…¥å£ï¼‰
> - å®Œæ•´éŸ³æ•ˆç³»ç»Ÿï¼ˆWeb Audio API åˆæˆéŸ³æ•ˆï¼‰
>
> **V1.4 æ›´æ–°**ï¼šUI/UX ä¼˜åŒ– - ç‹¬ç«‹æ‰«ç é¡µé¢ã€ä¸€é”®å­µåŒ–æµ‹è¯•åŠŸèƒ½ã€æ°”æ³¡è‡ªé€‚åº”ã€äº’åŠ¨æŒ‰é’®å¯¹é½ã€ç¢çº¸æœºå¤–éƒ¨éŸ³æ•ˆæ”¯æŒ
>
> **V1.3 æ›´æ–°**ï¼šå® ç‰©ç³»ç»Ÿå…¨é¢å‡çº§ - æ”¯æŒå¿ƒæƒ…å€¼è¡°å‡ã€ç»éªŒåŠ æˆã€ä¸°å¯Œäº’åŠ¨åŠ¨ä½œã€æ—¶é—´ç›¸å…³å¯¹è¯ã€ä¸“æ³¨é¡µé¢èƒŒæ™¯è‡ªå®šä¹‰ç­‰é«˜çº§åŠŸèƒ½

---

## ä¸€ã€æ¨¡å—æ¦‚è¿°

### 1.1 æ¨¡å—å®šä½

æ¸¸æˆåŒ–æ¿€åŠ±æ¨¡å—æ˜¯"æ²‰æµ¸å¼åŠ©å­¦ç©ºé—´"çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œé€šè¿‡å¯è§†åŒ–å­¦ä¹ æ•°æ®å’Œè¶£å‘³æ€§æ¿€åŠ±æœºåˆ¶ï¼Œæå‡ç”¨æˆ·çš„å­¦ä¹ åŠ¨åŠ›å’Œä¸“æ³¨ä½“éªŒã€‚

### 1.2 æ ¸å¿ƒä»·å€¼

- **æ­£å‘åé¦ˆ**ï¼šå°†æ¯ç‡¥çš„"å­¦ä¹ æ—¶é•¿"è½¬åŒ–ä¸ºå¯è§†åŒ–çš„"æˆå°±"å’Œ"å® ç‰©æˆé•¿"
- **æƒ…ç»ªç–å¯¼**ï¼šæä¾›å¿ƒç†æš—ç¤ºä¸å‹åŠ›å®£æ³„å‡ºå£
- **æ•°æ®é©±åŠ¨**ï¼šé€šè¿‡å­¦ä¹ ç”»åƒè¾…åŠ©ç”¨æˆ·è¿›è¡Œè‡ªæˆ‘ç®¡ç†

---

## äºŒã€åŠŸèƒ½æ¸…å•ä¸å¼€å‘çŠ¶æ€

| åŠŸèƒ½æ¨¡å— | åŠŸèƒ½ç‚¹ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è¯´æ˜ |
|----------|--------|--------|------|------|
| **ä¸“æ³¨ç•Œé¢å¢å¼º** | ä»Šæ—¥å­¦ä¹ æ—¶é•¿æ˜¾ç¤º | P0 | âœ… å·²å®Œæˆ | é¡µé¢åŠ è½½æ—¶è·å–å¹¶å®æ—¶æ˜¾ç¤º |
| | å®æ—¶ç»éªŒå€¼é¢„è§ˆ | P0 | âœ… å·²å®Œæˆ | è®¡æ—¶è¿‡ç¨‹ä¸­æ˜¾ç¤ºé¢„è®¡è·å¾—ç»éªŒ |
| | ç´¯è®¡ç»éªŒä¸ç­‰çº§ | P0 | âœ… å·²å®Œæˆ | æ˜¾ç¤ºç”¨æˆ·æ€»ç»éªŒå’Œå½“å‰ç­‰çº§ |
| | **èƒŒæ™¯ä¸»é¢˜è‡ªå®šä¹‰** | P1 | âœ… å·²å®Œæˆ | 6ç§ä¸»é¢˜å¯é€‰ï¼Œæœ¬åœ°ä¿å­˜ |
| | **é¡µé¢ç¦»å¼€æé†’** | P1 | âœ… å·²å®Œæˆ | ä¸“æ³¨æ—¶ç¦»å¼€é¡µé¢è‡ªåŠ¨æš‚åœ |
| | **å® ç‰©å¿«æ·äº’åŠ¨** | P1 | âœ… å·²å®Œæˆ | è®¾ç½®é¢æ¿å†…å¿«æ·æ“ä½œæŒ‰é’® |
| | **ç§»é™¤å® ç‰©è¯¦æƒ…æŒ‰é’®** | P2 | âœ… V1.4å®Œæˆ | ç”¨æˆ·éœ€åˆ°å­¦ä¹ å°å±‹æŸ¥çœ‹å® ç‰© |
| **ç”µå­å® ç‰©ç³»ç»Ÿ** | å® ç‰©å­µåŒ– | P1 | âœ… å·²å®Œæˆ | æ–°ç”¨æˆ·è·å¾—"è›‹"ï¼Œé€‰æ‹©ç±»å‹ |
| | å® ç‰©æˆé•¿ | P1 | âœ… å·²å®Œæˆ | ä¸“æ³¨æ—¶é•¿ = ç»éªŒå€¼ |
| | å® ç‰©è¿›åŒ– | P1 | âœ… å·²å®Œæˆ | è›‹â†’å¹¼å¹´â†’æˆå¹´â†’èŒä¸šå½¢æ€ |
| | å® ç‰©äº¤äº’ | P1 | âœ… å·²å®Œæˆ | ç‚¹å‡»å¼¹å‡ºé¼“åŠ±æ°”æ³¡ |
| | **å¿ƒæƒ…å€¼ç³»ç»Ÿ** | P1 | âœ… å·²å®Œæˆ | å¿ƒæƒ…å€¼å½±å“ç»éªŒè·å–ï¼ˆæœ€é«˜+30%ï¼‰ |
| | **å¿ƒæƒ…å€¼è¡°å‡** | P1 | âœ… å·²å®Œæˆ | æ¯5åˆ†é’Ÿå‡å°‘1ç‚¹å¿ƒæƒ…å€¼ |
| | **å¤šæ ·åŒ–äº’åŠ¨** | P1 | âœ… å·²å®Œæˆ | å–‚é£Ÿã€æŠšæ‘¸ã€ç©è€ã€èŠå¤© |
| | **ä¸°å¯ŒåŠ¨ç”»æ•ˆæœ** | P1 | âœ… å·²å®Œæˆ | åƒä¸œè¥¿ã€å¼€å¿ƒã€ç©è€ç­‰åŠ¨ç”» |
| | **æ—¶é—´ç›¸å…³å¯¹è¯** | P1 | âœ… å·²å®Œæˆ | æ—©ä¸­æ™šä¸åŒæ—¶æ®µå¯¹è¯å†…å®¹ |
| | **ç»éªŒå€¼å®æ—¶æ›´æ–°** | P1 | âœ… å·²å®Œæˆ | æ¯10ç§’è‡ªåŠ¨æ›´æ–°å® ç‰©çŠ¶æ€ |
| | **ä¸€é”®å­µåŒ–ï¼ˆæµ‹è¯•ï¼‰** | P2 | âœ… V1.4å®Œæˆ | é¡¶éƒ¨æŒ‰é’®ï¼Œæ–¹ä¾¿æµ‹è¯• |
| | **æ°”æ³¡è‡ªé€‚åº”** | P2 | âœ… V1.4å®Œæˆ | æ°”æ³¡å¤§å°é€‚é…æ–‡å­—é•¿åº¦ |
| | **äº’åŠ¨æŒ‰é’®å¯¹é½** | P2 | âœ… V1.4å®Œæˆ | ä¿®å¤ç½‘æ ¼å¸ƒå±€å¯¹é½é—®é¢˜ |
| **æ‰«ç å…¥åº§** | ç‹¬ç«‹æ‰«ç é¡µé¢ | P1 | âœ… V1.4å®Œæˆ | å¤§å°ºå¯¸äºŒç»´ç ï¼Œé€‚é…æ‰‹æœº |
| **æƒ…ç»ªç¢çº¸æœº** | æ–‡å­—è¾“å…¥ | P0 | âœ… V2.0å®Œæˆ | ä»¿çº¸å¼ æ ·å¼è¾“å…¥æ¡†ï¼ˆå¸¦èƒ¶å¸¦è£…é¥°ï¼‰ |
| | **4ç§ç²‰ç¢æ–¹å¼** | P0 | âœ… V2.0å®Œæˆ | ç«ç®­å‘å°„ã€å¼ºåŠ›ç²‰ç¢ã€æ³¡æ³¡é£˜èµ°ã€é»‘æ´å¸å…¥ |
| | **æ²»æ„ˆå›¢å­å‰ç¥¥ç‰©** | P0 | âœ… V2.0å®Œæˆ | 3ç§è¡¨æƒ…çŠ¶æ€ï¼ˆIDLE/PROCESSING/RESULTï¼‰ |
| | **ç²‰ç¢åŠ¨ç”»æ•ˆæœ** | P0 | âœ… V2.0å®Œæˆ | æ¯ç§æ–¹å¼ç‹¬ç‰¹åŠ¨ç”»ï¼ˆCSS + JSï¼‰ |
| | **AIå®‰æ…°è¯è¯­** | P1 | âœ… V2.0å®Œæˆ | Gemini API é›†æˆï¼ˆè®¾ç½®é¡µé¢å¯é…ç½® Keyï¼‰ |
| | **å†å²è®°å½•åŠŸèƒ½** | P1 | âœ… V2.0å®Œæˆ | localStorage å­˜å‚¨æ²»æ„ˆæ—…ç¨‹ |
| | **éŸ³æ•ˆç³»ç»Ÿ** | P1 | âœ… V2.0å®Œæˆ | Web Audio API åˆæˆéŸ³æ•ˆ |
| | **è®¾ç½®é¢æ¿** | P2 | âœ… V2.0å®Œæˆ | API Key é…ç½®ã€éŸ³æ•ˆå¼€å…³ |
| **å­¦ä¹ æ•°æ®ç»Ÿè®¡** | æ¯æ—¥/å‘¨/æœˆç»Ÿè®¡ | P1 | âœ… å·²å®Œæˆ | æ—¶é•¿è¶‹åŠ¿å›¾è¡¨ |
| | æ—¶æ®µçƒ­åŠ›å›¾ | P1 | âœ… å·²å®Œæˆ | 24å°æ—¶å­¦ä¹ åˆ†å¸ƒ |
| | å­¦ä¹ ç”»åƒæ ‡ç­¾ | P2 | âœ… å·²å®Œæˆ | æ ‡ç­¾äº‘å±•ç¤ºç‰¹å¾ |

---

## ä¸‰ã€æŠ€æœ¯æ¶æ„

### 3.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯é¡µé¢å±‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚focus.htmlâ”‚  â”‚ pet.html â”‚  â”‚shredder  â”‚  â”‚stats.htmlâ”‚           â”‚
â”‚  â”‚ ä¸“æ³¨å¢å¼º â”‚  â”‚ ç”µå­å® ç‰© â”‚  â”‚ æƒ…ç»ªç¢çº¸ â”‚  â”‚ å­¦ä¹ ç»Ÿè®¡ â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Spring Boot åç«¯æœåŠ¡                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚FocusControllerâ”‚ â”‚PetControllerâ”‚ â”‚StatsControllerâ”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚         â”‚               â”‚               â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚FocusServiceâ”‚  â”‚ PetService â”‚  â”‚StatsServiceâ”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®å±‚ (MySQL)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚focus_records â”‚  â”‚  user_pets   â”‚  â”‚learning_statsâ”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ç›®å½•ç»“æ„

```
src/main/
â”œâ”€â”€ java/com/example/qr_code/
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ FocusController.java    # âœ… å·²æœ‰
â”‚   â”‚   â”œâ”€â”€ PetController.java      # âœ… å·²åˆ›å»º
â”‚   â”‚   â””â”€â”€ StatsController.java    # âœ… å·²åˆ›å»º
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ FocusService.java       # âœ… å·²æœ‰ï¼ˆå·²å¢å¼ºï¼‰
â”‚   â”‚   â”œâ”€â”€ PetService.java         # âœ… å·²åˆ›å»º
â”‚   â”‚   â””â”€â”€ StatsService.java       # âœ… å·²åˆ›å»º
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ UserPet.java            # âœ… å·²æœ‰
â”‚   â”‚   â”œâ”€â”€ LearningStats.java      # âœ… å·²æœ‰
â”‚   â”‚   â””â”€â”€ FocusRecord.java        # âœ… å·²æœ‰
â”‚   â””â”€â”€ mapper/
â”‚       â”œâ”€â”€ UserPetMapper.java      # âœ… å·²æœ‰
â”‚       â”œâ”€â”€ LearningStatsMapper.java# âœ… å·²æœ‰
â”‚       â””â”€â”€ FocusRecordMapper.java  # âœ… å·²æœ‰
â””â”€â”€ resources/static/
    â”œâ”€â”€ focus.html                  # âœ… å·²å¢å¼º
    â”œâ”€â”€ pet.html                    # âœ… å·²åˆ›å»º
    â”œâ”€â”€ shredder.html               # âœ… å·²åˆ›å»º
    â””â”€â”€ stats.html                  # âœ… å·²åˆ›å»º
```

---

## å››ã€æ•°æ®åº“è®¾è®¡

### 4.1 user_pets è¡¨ï¼ˆç”¨æˆ·å® ç‰©ï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | BIGINT | ä¸»é”®è‡ªå¢ |
| user_id | BIGINT | ç”¨æˆ·IDï¼ˆå”¯ä¸€ï¼‰ |
| pet_name | VARCHAR(50) | å® ç‰©åç§°ï¼Œé»˜è®¤"å°è›‹è›‹" |
| pet_type | VARCHAR(20) | ç±»å‹ï¼šcat/dog/rabbit |
| exp | INT | ç»éªŒå€¼ |
| level | INT | ç­‰çº§ |
| stage | ENUM | è¿›åŒ–é˜¶æ®µï¼šegg/baby/teen/adult/professional |
| mood | INT | å¿ƒæƒ…å€¼(0-100) |
| last_interact_time | DATETIME | ä¸Šæ¬¡äº’åŠ¨æ—¶é—´ |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ |

### 4.2 learning_stats è¡¨ï¼ˆå­¦ä¹ ç»Ÿè®¡ï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | BIGINT | ä¸»é”®è‡ªå¢ |
| user_id | BIGINT | ç”¨æˆ·ID |
| stat_date | DATE | ç»Ÿè®¡æ—¥æœŸ |
| total_duration | INT | å½“æ—¥æ€»æ—¶é•¿(ç§’) |
| focus_count | INT | ä¸“æ³¨æ¬¡æ•° |
| avg_duration | INT | å¹³å‡æ—¶é•¿(ç§’) |
| max_duration | INT | æœ€é•¿å•æ¬¡æ—¶é•¿(ç§’) |
| exp_earned | INT | å½“æ—¥è·å¾—ç»éªŒå€¼ |

### 4.3 focus_records è¡¨ï¼ˆä¸“æ³¨è®°å½•ï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | BIGINT | ä¸»é”®è‡ªå¢ |
| user_id | BIGINT | ç”¨æˆ·ID |
| duration | INT | ä¸“æ³¨æ—¶é•¿(ç§’) |
| focus_date | DATE | ä¸“æ³¨æ—¥æœŸ |
| start_time | DATETIME | å¼€å§‹æ—¶é—´ |
| end_time | DATETIME | ç»“æŸæ—¶é—´ |

---

## äº”ã€API æ¥å£è®¾è®¡

### 5.1 ä¸“æ³¨æ¨¡å— APIï¼ˆå·²å®ç°ï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|------|
| POST | `/api/focus/save` | ä¿å­˜ä¸“æ³¨è®°å½• | âœ… |
| GET | `/api/focus/today` | è·å–ä»Šæ—¥ç»Ÿè®¡ | âœ… |

### 5.2 å® ç‰©æ¨¡å— APIï¼ˆå·²å®ç°ï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è¯·æ±‚å‚æ•° | è¿”å›æ•°æ® |
|------|------|------|----------|----------|
| GET | `/api/pet` | è·å–å½“å‰å® ç‰© | - | `{pet, expToNextLevel}` |
| POST | `/api/pet/create` | åˆ›å»ºå® ç‰© | `{petType, petName}` | `{success, pet}` |
| POST | `/api/pet/interact` | ä¸å® ç‰©äº’åŠ¨ | - | `{message, moodChange}` |
| GET | `/api/pet/messages` | è·å–é¼“åŠ±è¯­åˆ—è¡¨ | - | `{messages[]}` |

### 5.3 ç»Ÿè®¡æ¨¡å— APIï¼ˆå·²å®ç°ï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è¯·æ±‚å‚æ•° | è¿”å›æ•°æ® |
|------|------|------|----------|----------|
| GET | `/api/stats/weekly` | è·å–å‘¨ç»Ÿè®¡ | - | `{dailyData[], totalMinutes}` |
| GET | `/api/stats/monthly` | è·å–æœˆç»Ÿè®¡ | - | `{dailyData[], totalMinutes}` |
| GET | `/api/stats/hourly` | è·å–æ—¶æ®µåˆ†å¸ƒ | - | `{hourlyData[24]}` |
| GET | `/api/stats/profile` | è·å–å­¦ä¹ ç”»åƒ | - | `{tags[], summary}` |

---

## å…­ã€æ ¸å¿ƒç®—æ³•

### 6.1 ç»éªŒå€¼è®¡ç®—

```java
// æ¯åˆ†é’Ÿ1ç‚¹ç»éªŒï¼Œè¶…è¿‡30åˆ†é’Ÿé¢å¤–50%å¥–åŠ±
private int calculateExp(int durationSeconds) {
    int minutes = durationSeconds / 60;
    if (minutes >= 30) {
        return (int) (minutes * 1.5);
    }
    return minutes;
}
```

### 6.2 å® ç‰©è¿›åŒ–è§„åˆ™

| é˜¶æ®µ | è‹±æ–‡ | æ‰€éœ€ç´¯è®¡ç»éªŒ | å½¢æ€æè¿° |
|------|------|-------------|----------|
| è›‹ | egg | 0 | åˆå§‹çŠ¶æ€ |
| å¹¼å¹´ä½“ | baby | 100 | ç ´å£³è€Œå‡º |
| å°‘å¹´ä½“ | teen | 500 | åˆå…·å½¢æ€ |
| æˆå¹´ä½“ | adult | 2000 | å®Œå…¨æˆç†Ÿ |
| èŒä¸šå½¢æ€ | professional | 10000 | æˆ´å­¦å£«å¸½ |

### 6.3 ç­‰çº§è®¡ç®—

```java
// å‡çº§æ‰€éœ€ç»éªŒ = å½“å‰ç­‰çº§ Ã— 100
public int getExpToNextLevel(int currentLevel) {
    return currentLevel * 100;
}

// æ ¹æ®ç´¯è®¡ç»éªŒè®¡ç®—ç­‰çº§
public int calculateLevel(int totalExp) {
    int level = 1;
    int expNeeded = 100;
    int expUsed = 0;
    while (expUsed + expNeeded <= totalExp) {
        expUsed += expNeeded;
        level++;
        expNeeded = level * 100;
    }
    return level;
}
```

---

## ä¸ƒã€é¡µé¢è®¾è®¡è§„èŒƒ

### 7.1 è®¾è®¡é£æ ¼

- **å…³é”®è¯**ï¼šæ¸©é¦¨ã€å¯çˆ±ã€æ¸¸æˆåŒ–ã€æ¸å˜
- **ä¸»è‰²è°ƒ**ï¼š`#6C5CE7`ï¼ˆç´«è‰²ï¼‰ã€`#A29BFE`ï¼ˆæµ…ç´«ï¼‰ã€`#74B9FF`ï¼ˆè“è‰²ï¼‰
- **èƒŒæ™¯è‰²**ï¼š`#F8F9FA`ï¼ˆæµ…ç°ï¼‰ã€`#FFF5F5`ï¼ˆæš–ç™½ï¼‰
- **å­—ä½“**ï¼šPingFang SC / M PLUS Rounded 1c

### 7.2 ä¸“æ³¨ç•Œé¢å¢å¼º (focus.html)

**æ–°å¢å…ƒç´ **ï¼š
- é¡¶éƒ¨çŠ¶æ€æ ï¼šä»Šæ—¥ç´¯è®¡æ—¶é•¿ï¼ˆå¤§å­—ä½“ï¼‰+ ç»éªŒæ¡
- è®¡æ—¶å™¨ä¸‹æ–¹ï¼šæœ¬æ¬¡é¢„è®¡è·å¾—ç»éªŒå€¼
- åº•éƒ¨å¯¼èˆªï¼šå® ç‰©å…¥å£ + ç»Ÿè®¡å…¥å£

### 7.3 ç”µå­å® ç‰©é¡µé¢ (pet.html)

**å¸ƒå±€**ï¼š
- é¡¶éƒ¨ï¼šè¿”å›æŒ‰é’® + é¡µé¢æ ‡é¢˜
- ä¸­å¤®ï¼šå® ç‰©å½¢è±¡ï¼ˆå¸¦idleåŠ¨ç”»ï¼‰
- ä¸­éƒ¨ï¼šå® ç‰©åç§° + ç­‰çº§ + ç»éªŒè¿›åº¦æ¡
- åº•éƒ¨ï¼šäº¤äº’æŒ‰é’®ï¼ˆæŠšæ‘¸ã€å¯¹è¯ï¼‰

### 7.4 æƒ…ç»ªç¢çº¸æœºé¡µé¢ (shredder.html) - V2.0 å…¨é¢å‡çº§ç‰ˆ

**å¸ƒå±€**ï¼š
- é¡¶éƒ¨ï¼šè¿”å›æŒ‰é’® + æ ‡é¢˜ + é™éŸ³/å†å²è®°å½•/è®¾ç½®æŒ‰é’®
- ä¸­å¤®å‰ç¥¥ç‰©ï¼šæ²»æ„ˆå›¢å­ï¼ˆ3ç§è¡¨æƒ…çŠ¶æ€ï¼‰
- ä¸­å¤®ï¼šä»¿çº¸å¼ è¾“å…¥æ¡†ï¼ˆå¸¦èƒ¶å¸¦è£…é¥° + å¿ƒå½¢æ¶‚é¸¦ï¼‰
- å·¥å…·æ ï¼š4ç§ç²‰ç¢æ–¹å¼æŒ‰é’®ï¼ˆå¸¦æ‚¬æµ®æç¤ºï¼‰
- å¤„ç†é˜¶æ®µï¼šç²‰ç¢åŠ¨ç”»å±•ç¤º
- ç»“æœé˜¶æ®µï¼šå¿ƒå½¢å›¾æ ‡ + AI å®‰æ…°è¯è¯­ + é‡è¯•æŒ‰é’®

**4ç§ç²‰ç¢æ–¹å¼**ï¼š
| æ–¹å¼ | åŠ¨ç”»æ•ˆæœ | éŸ³æ•ˆ |
|------|----------|------|
| ğŸš€ å‘å°„å¤ªç©º | ç«ç®­å‡ç©º + æ˜Ÿæ˜Ÿé—ªçƒ + çƒŸé›¾ç²’å­ | æ¨è¿›å™¨å™ªéŸ³ + é¢‘ç‡ä¸Šå‡ |
| âœ‚ï¸ å¼ºåŠ›ç²‰ç¢ | çº¸å¼ è¢«å¸å…¥ + ç¢ç‰‡é£˜è½ | æœºæ¢°å™ªéŸ³ + é”¯é½¿å£° |
| ğŸ’¨ å¹æˆæ³¡æ³¡ | æ–‡å­—å˜æ³¡æ³¡é£˜èµ° + é­”æ³•æ£’ | æ°”æ³¡å£° |
| ğŸŒ€ ä¸¢è¿›é»‘æ´ | é»‘æ´å‡ºç° + çº¸å¼ è¢«å¸å…¥ | ä½é¢‘å—¡é¸£ |

**éŸ³æ•ˆç³»ç»Ÿ**ï¼š
- ä½¿ç”¨ Web Audio API åˆæˆéŸ³æ•ˆ
- æ¯ç§ç²‰ç¢æ–¹å¼ç‹¬ç‰¹éŸ³æ•ˆ
- æ²»æ„ˆå®Œæˆå’Œå¼¦éŸ³æ•ˆ
- æ”¯æŒé™éŸ³åˆ‡æ¢

**AI å®‰æ…°è¯è¯­**ï¼š
- é¢„ç•™ Gemini API é…ç½®å…¥å£
- è®¾ç½®é¡µé¢å¯é…ç½® API Key
- æœªé…ç½®æ—¶ä½¿ç”¨ 12 æ¡é¢„è®¾å®‰æ…°è¯­
- API è°ƒç”¨å¤±è´¥æ—¶è‡ªåŠ¨é™çº§

**å†å²è®°å½•**ï¼š
- localStorage å­˜å‚¨æ²»æ„ˆæ—…ç¨‹
- æ˜¾ç¤ºç²‰ç¢æ–¹å¼ã€æ—¥æœŸã€å®‰æ…°è¯è¯­
- æ”¯æŒæ¸…ç©ºè®°å½•

**âš ï¸ å¾…é…ç½®é¡¹**ï¼š
- **Gemini API Key**ï¼šç”¨æˆ·éœ€åœ¨è®¾ç½®é¡µé¢é…ç½® Google Gemini API Key ä»¥å¯ç”¨ AI ç”Ÿæˆå®‰æ…°è¯è¯­
- API è·å–åœ°å€ï¼šhttps://aistudio.google.com/apikey

### 7.5 å­¦ä¹ ç»Ÿè®¡é¡µé¢ (stats.html)

**å¸ƒå±€**ï¼š
- é¡¶éƒ¨ï¼šæ—¶é—´é€‰æ‹©å™¨ï¼ˆæ—¥/å‘¨/æœˆï¼‰
- æ ¸å¿ƒå¡ç‰‡ï¼šæ€»æ—¶é•¿ã€å¹³å‡æ—¶é•¿ã€è¿ç»­å¤©æ•°
- å›¾è¡¨åŒºï¼šECharts æŠ˜çº¿å›¾/æŸ±çŠ¶å›¾
- çƒ­åŠ›å›¾ï¼š24å°æ—¶æ—¶æ®µåˆ†å¸ƒ
- åº•éƒ¨ï¼šå­¦ä¹ ç”»åƒæ ‡ç­¾äº‘

---

## å…«ã€å¼€å‘è¿›åº¦è¿½è¸ª

### 8.1 å½“å‰è¿›åº¦

| ä»»åŠ¡ | çŠ¶æ€ | å®Œæˆæ—¶é—´ |
|------|------|----------|
| ä»£ç ç»“æ„æ¢ç´¢ | âœ… å®Œæˆ | 2026-01-05 |
| åŠŸèƒ½è®¾è®¡æ–‡æ¡£ | âœ… å®Œæˆ | 2026-01-05 |
| focus.html ç•Œé¢å¢å¼º | âœ… å®Œæˆ | 2026-01-05 |
| PetService + PetController | âœ… å®Œæˆ | 2026-01-05 |
| pet.html é¡µé¢ | âœ… å®Œæˆ | 2026-01-05 |
| shredder.html é¡µé¢ | âœ… å®Œæˆ | 2026-01-05 |
| StatsService + StatsController | âœ… å®Œæˆ | 2026-01-05 |
| stats.html é¡µé¢ | âœ… å®Œæˆ | 2026-01-05 |
| **shredder.html V2.0 å…¨é¢å‡çº§** | âœ… å®Œæˆ | 2026-01-19 |

### 8.2 å·²å®ŒæˆåŠŸèƒ½æ€»ç»“

1. **ä¸“æ³¨ç•Œé¢å¢å¼º**ï¼šæ˜¾ç¤ºä»Šæ—¥å­¦ä¹ æ—¶é•¿ã€å®æ—¶ç»éªŒå€¼é¢„è§ˆã€å¿«æ·å¯¼èˆª
2. **ç”µå­å® ç‰©ç³»ç»Ÿ**ï¼šå® ç‰©å­µåŒ–ã€æˆé•¿è¿›åŒ–ã€äº¤äº’é¼“åŠ±
3. **æƒ…ç»ªç¢çº¸æœº V2.0**ï¼š
   - 4ç§ç²‰ç¢æ–¹å¼ï¼ˆç«ç®­ã€ç¢çº¸æœºã€æ³¡æ³¡ã€é»‘æ´ï¼‰
   - æ²»æ„ˆå›¢å­å‰ç¥¥ç‰©ï¼ˆ3ç§è¡¨æƒ…ï¼‰
   - AI å®‰æ…°è¯è¯­ï¼ˆGemini APIï¼‰
   - å†å²è®°å½•åŠŸèƒ½
   - å®Œæ•´éŸ³æ•ˆç³»ç»Ÿ
4. **å­¦ä¹ æ•°æ®ç»Ÿè®¡**ï¼šå‘¨/æœˆè¶‹åŠ¿å›¾ã€æ—¶æ®µåˆ†å¸ƒã€å­¦ä¹ ç”»åƒ

---

## ä¹ã€æ³¨æ„äº‹é¡¹

1. **ç”¨æˆ·ç™»å½•éªŒè¯**ï¼šæ‰€æœ‰ API éœ€æ£€æŸ¥ Session ä¸­çš„ç”¨æˆ·ä¿¡æ¯
2. **å® ç‰©è‡ªåŠ¨åˆ›å»º**ï¼šç”¨æˆ·é¦–æ¬¡è®¿é—®å® ç‰©é¡µé¢æ—¶è‡ªåŠ¨åˆ›å»º
3. **ç»éªŒå€¼åŒæ­¥**ï¼šä¸“æ³¨ç»“æŸåè‡ªåŠ¨åŒæ­¥åˆ°å® ç‰©ç»éªŒ
4. **æ•°æ®ä¸ä¿å­˜**ï¼šæƒ…ç»ªç¢çº¸æœºçš„æ–‡å­—å†…å®¹ä¸å­˜å‚¨åˆ°æ•°æ®åº“ï¼ˆä»…æœ¬åœ°å†å²è®°å½•ï¼‰
5. **Gemini API Key é…ç½®**ï¼šç”¨æˆ·éœ€åœ¨æƒ…ç»ªç¢çº¸æœºè®¾ç½®é¡µé¢é…ç½® API Key ä»¥å¯ç”¨ AI å®‰æ…°è¯è¯­
   - è·å–åœ°å€ï¼šhttps://aistudio.google.com/apikey
   - å­˜å‚¨ä½ç½®ï¼šlocalStorageï¼ˆgeminiApiKeyï¼‰
   - æœªé…ç½®æ—¶è‡ªåŠ¨ä½¿ç”¨é¢„è®¾å®‰æ…°è¯­

---

*æœ¬æ–‡æ¡£éšå¼€å‘è¿›åº¦æŒç»­æ›´æ–°*
